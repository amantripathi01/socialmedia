// Test generated by RoostGPT for test ExpressJs using AI Type Open AI and AI Model gpt-4

const axios = require("axios");
const { followAndUnfollowUser } = require('./User');
jest.mock('axios');

describe('User Action Test Suite', () => {
  afterEach(() => {
    jest.clearAllMocks();
  });

  test('should dispatch followUserSuccess when followAndUnfollowUser is called and request is successful', async () => {
    const dispatch = jest.fn();
    const id = '123';
    const message = 'User followed successfully';

    axios.get.mockResolvedValue({
      data: {
        message
      }
    });

    await followAndUnfollowUser(id)(dispatch);

    expect(dispatch).toBeCalledTimes(2);
    expect(dispatch).toHaveBeenNthCalledWith(1, { type: 'followUserRequest' });
    expect(dispatch).toHaveBeenNthCalledWith(2, { type: 'followUserSuccess', payload: message });
  });

  test('should dispatch followUserFailure when followAndUnfollowUser is called and request fails', async () => {
    const dispatch = jest.fn();
    const id = '123';
    const message = 'Error in following user';

    axios.get.mockRejectedValue({
      response: {
        data: {
          message
        }
      }
    });

    await followAndUnfollowUser(id)(dispatch);

    expect(dispatch).toBeCalledTimes(2);
    expect(dispatch).toHaveBeenNthCalledWith(1, { type: 'followUserRequest' });
    expect(dispatch).toHaveBeenNthCalledWith(2, { type: 'followUserFailure', payload: message });
  });
});
